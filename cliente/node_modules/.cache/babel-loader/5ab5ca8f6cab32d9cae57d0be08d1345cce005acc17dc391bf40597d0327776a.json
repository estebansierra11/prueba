{"ast":null,"code":"import React,{useState,useEffect}from'react';import'bootstrap/dist/css/bootstrap.min.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[tasks,setTasks]=useState([]);const[task,setTask]=useState('');const[editTask,setEditTask]=useState({id:null,task:''});const[nombres,setNombres]=useState([]);const[selectedNombre]=useState('');useEffect(()=>{fetchTasks();fetchNombres();},[]);const fetchTasks=async()=>{const response=await fetch('http://localhost/prueba/servidor/api.php');const data=await response.json();setTasks(data);};const fetchNombres=async()=>{try{const response=await fetch(\"http://localhost/prueba/servidor/api.php?external=true\");const result=await response.json();setNombres(result);}catch(error){console.error(\"Error fetching nombres:\",error);}};const addTask=async()=>{await fetch('http://localhost/prueba/servidor/api.php',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({task})});setTask('');fetchTasks();};const updateTask=async(id,newTask,isedit)=>{await fetch('http://localhost/prueba/servidor/api.php',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({id,task:newTask,isedit})});fetchTasks();setEditTask({id:null,task:''});};const updateTaskCompletion=async(id,completed)=>{const task=tasks.find(t=>t.id===id);await fetch('http://localhost/prueba/servidor/api.php',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({id,task:task.task,completed:completed?1:0})});fetchTasks();};const deleteTask=async id=>{await fetch('http://localhost/prueba/servidor/api.php',{method:'DELETE',headers:{'Content-Type':'application/json'},body:JSON.stringify({id})});fetchTasks();};const markTask=async id=>{const task=tasks.find(t=>t.id===id);await updateTaskCompletion(id,!task.completed);};const startEditTask=task=>{setEditTask({id:task.id,task:task.task});};const handleEditTaskChange=e=>{setEditTask({...editTask,task:e.target.value});};const saveTask=async()=>{if(editTask.id!==null){await updateTask(editTask.id,editTask.task,1);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Lista de Tareas\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",id:\"selectNombre\",value:selectedNombre,onChange:e=>setTask(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione un nombre\"}),nombres.map((nombre,index)=>/*#__PURE__*/_jsx(\"option\",{value:nombre.nombre,children:nombre.nombre},index))]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:addTask,children:\"A\\xF1adir\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",children:tasks.map(taskItem=>/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-75\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:editTask.id===taskItem.id?editTask.task:taskItem.task,onChange:editTask.id===taskItem.id?handleEditTaskChange:null,style:{backgroundColor:taskItem.completed?'green':'white'},disabled:editTask.id!==taskItem.id})}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",role:\"group\",\"aria-label\":\"Acciones\",children:editTask.id===taskItem.id?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success mr-1\",onClick:saveTask,children:\"Guardar\"}):/*#__PURE__*/_jsx(_Fragment,{children:taskItem.completed?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger mr-2\",onClick:()=>deleteTask(taskItem.id),children:\"Eliminar\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning mr-2\",onClick:()=>startEditTask(taskItem),children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success mr-2\",onClick:()=>markTask(taskItem.id),children:\"Marcar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger mr-2\",onClick:()=>deleteTask(taskItem.id),children:\"Eliminar\"})]})})})]},taskItem.id))})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","tasks","setTasks","task","setTask","editTask","setEditTask","id","nombres","setNombres","selectedNombre","fetchTasks","fetchNombres","response","fetch","data","json","result","error","console","addTask","method","headers","body","JSON","stringify","updateTask","newTask","isedit","updateTaskCompletion","completed","find","t","deleteTask","markTask","startEditTask","handleEditTaskChange","e","target","value","saveTask","className","children","onChange","map","nombre","index","onClick","taskItem","type","style","backgroundColor","disabled","role"],"sources":["C:/xampp/htdocs/prueba/cliente/src/componentes/TaskList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nfunction App() {\r\n    const [tasks, setTasks] = useState([]);\r\n    const [task, setTask] = useState('');\r\n    const [editTask, setEditTask] = useState({ id: null, task: '' });\r\n    const [nombres, setNombres] = useState([]);\r\n    const [selectedNombre] = useState('');\r\n\r\n    useEffect(() => {\r\n        fetchTasks();\r\n        fetchNombres();\r\n    }, []);\r\n\r\n    const fetchTasks = async () => {\r\n        const response = await fetch('http://localhost/prueba/servidor/api.php');\r\n        const data = await response.json();\r\n        setTasks(data);\r\n    };\r\n\r\n    const fetchNombres = async () => {\r\n        try {\r\n            const response = await fetch(\"http://localhost/prueba/servidor/api.php?external=true\");\r\n            const result = await response.json();\r\n            setNombres(result); \r\n        } catch (error) {\r\n            console.error(\"Error fetching nombres:\", error);\r\n        }\r\n    };\r\n\r\n    const addTask = async () => {\r\n        await fetch('http://localhost/prueba/servidor/api.php', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ task }),\r\n        });\r\n        setTask('');\r\n        fetchTasks();\r\n    };\r\n\r\n    const updateTask = async (id, newTask, isedit) => {\r\n        await fetch('http://localhost/prueba/servidor/api.php', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ id, task: newTask, isedit }),\r\n        });\r\n        fetchTasks();\r\n        setEditTask({ id: null, task: '' });\r\n    };\r\n\r\n    const updateTaskCompletion = async (id, completed) => {\r\n        const task = tasks.find(t => t.id === id);\r\n        await fetch('http://localhost/prueba/servidor/api.php', {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ id, task: task.task, completed: completed ? 1 : 0 }),\r\n        });\r\n        fetchTasks();\r\n    };\r\n\r\n    const deleteTask = async (id) => {\r\n        await fetch('http://localhost/prueba/servidor/api.php', {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ id }),\r\n        });\r\n        fetchTasks();\r\n    };\r\n\r\n    const markTask = async (id) => {\r\n        const task = tasks.find(t => t.id === id);\r\n        await updateTaskCompletion(id, !task.completed);\r\n    };\r\n\r\n    const startEditTask = (task) => {\r\n        setEditTask({ id: task.id, task: task.task });\r\n    };\r\n\r\n    const handleEditTaskChange = (e) => {\r\n        setEditTask({ ...editTask, task: e.target.value });\r\n    };\r\n\r\n    const saveTask = async () => {\r\n        if (editTask.id !== null) {\r\n            await updateTask(editTask.id, editTask.task, 1);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container mt-5\">\r\n            <h1 className=\"text-center\">Lista de Tareas</h1>\r\n            <div className=\"input-group mb-3\">\r\n            <select\r\n                    className=\"form-select\"\r\n                    id=\"selectNombre\"\r\n                    value={selectedNombre}\r\n                    onChange={(e) =>  setTask(e.target.value)}\r\n                >\r\n                    <option value=\"\">Seleccione un nombre</option>\r\n                    {nombres.map((nombre, index) => (\r\n                        <option key={index} value={nombre.nombre}>\r\n                            {nombre.nombre}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n                <button className=\"btn btn-primary\" onClick={addTask}>\r\n                    AÃ±adir\r\n                </button>\r\n            </div>\r\n\r\n            \r\n\r\n            <ul className=\"list-group\">\r\n                {tasks.map((taskItem) => (\r\n                    <li key={taskItem.id} className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                        <div className=\"w-75\">\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"form-control\"\r\n                                value={editTask.id === taskItem.id ? editTask.task : taskItem.task}\r\n                                onChange={editTask.id === taskItem.id ? handleEditTaskChange : null}\r\n                                style={{ backgroundColor: taskItem.completed ? 'green' : 'white' }}\r\n                                disabled={editTask.id !== taskItem.id}\r\n                            />\r\n                        </div>\r\n                        <div className=\"btn-group\" role=\"group\" aria-label=\"Acciones\">\r\n                            {editTask.id === taskItem.id ? (\r\n                                <button className=\"btn btn-success mr-1\" onClick={saveTask}>\r\n                                    Guardar\r\n                                </button>\r\n                            ) : (\r\n                                <>\r\n                                    {taskItem.completed ? (\r\n                                        <button className=\"btn btn-danger mr-2\" onClick={() => deleteTask(taskItem.id)}>\r\n                                            Eliminar\r\n                                        </button>\r\n                                    ) : (\r\n                                        <>\r\n                                            <button className=\"btn btn-warning mr-2\" onClick={() => startEditTask(taskItem)}>\r\n                                                Editar\r\n                                            </button>\r\n                                            <button className=\"btn btn-success mr-2\" onClick={() => markTask(taskItem.id)}>\r\n                                                Marcar\r\n                                            </button>\r\n                                            <button className=\"btn btn-danger mr-2\" onClick={() => deleteTask(taskItem.id)}>\r\n                                                Eliminar\r\n                                            </button>\r\n                                        </>\r\n                                    )}\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}